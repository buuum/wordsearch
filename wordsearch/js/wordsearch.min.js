var wordsearch;wordsearch=function(){function a(a,b){var c;null==b&&(b=!1),this.letters="AABBCCDDEEFFGGHHIIJKLLMMNNOOPPQRSSTTUUVWXYZ",c=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],b?this.allOrientations=b:this.allOrientations=c,this.wordList=this.parseWords(a),this.orientations={horizontal:function(a,b,c){return{x:a+c,y:b}},horizontalBack:function(a,b,c){return{x:a-c,y:b}},vertical:function(a,b,c){return{x:a,y:b+c}},verticalUp:function(a,b,c){return{x:a,y:b-c}},diagonal:function(a,b,c){return{x:a+c,y:b+c}},diagonalBack:function(a,b,c){return{x:a-c,y:b+c}},diagonalUp:function(a,b,c){return{x:a+c,y:b-c}},diagonalUpBack:function(a,b,c){return{x:a-c,y:b-c}}},this.checkOrientations={horizontal:function(a,b,c,d,e){return d>=a+e},horizontalBack:function(a,b,c,d,e){return a+1>=e},vertical:function(a,b,c,d,e){return c>=b+e},verticalUp:function(a,b,c,d,e){return b+1>=e},diagonal:function(a,b,c,d,e){return d>=a+e&&c>=b+e},diagonalBack:function(a,b,c,d,e){return a+1>=e&&c>=b+e},diagonalUp:function(a,b,c,d,e){return d>=a+e&&b+1>=e},diagonalUpBack:function(a,b,c,d,e){return a+1>=e&&b+1>=e}},this.skipOrientations={horizontal:function(a,b,c){return{x:0,y:b+1}},horizontalBack:function(a,b,c){return{x:c-1,y:b}},vertical:function(a,b,c){return{x:0,y:b+100}},verticalUp:function(a,b,c){return{x:0,y:c-1}},diagonal:function(a,b,c){return{x:0,y:b+1}},diagonalBack:function(a,b,c){return{x:c-1,y:a>=c-1?b+1:b}},diagonalUp:function(a,b,c){return{x:0,y:b<c-1?c-1:b+1}},diagonalUpBack:function(a,b,c){return{x:c-1,y:a>=c-1?b+1:b}}}}return a.prototype.parseWords=function(a){return a=a.map(function(a){return a.toUpperCase()}),a.slice(0).sort(function(a,b){var c;return"function"==typeof(c=a.length<b.length)?c({1:0}):void 0})},a.prototype.fillPuzzle=function(a,b){var c,d,e,f;for(f=[],c=void 0,d=void 0,e=void 0,c=0;c<b.height;){for(f.push([]),d=0;d<b.width;)f[c].push(""),d++;c++}for(c=0,e=a.length;c<e;){if(!this.placeWordInPuzzle(f,b,a[c]))return null;c++}return f},a.prototype.placeWordInPuzzle=function(a,b,c){var d,e;return d=this.findBestLocations(a,b,c),0!==d.length&&(e=d[Math.floor(Math.random()*d.length)],this.placeWord(a,c,e.x,e.y,this.orientations[e.orientation]),!0)},a.prototype.generate=function(a){var b,c,d;for(null==a&&(a={}),c={height:this.wordList[0].length,width:this.wordList[0].length,orientations:this.allOrientations,fillBlanks:!0,maxAttempts:3,preferOverlap:!0},a=$.extend(c,a),a.height||(a.height=this.wordList[0].length),a.width||(a.width=this.wordList[0].length);!d;){for(;!d&&b++<a.maxAttempts;)d=this.fillPuzzle(this.wordList,a);d||(a.height++,a.width++,b=0)}return a.fillBlanks&&this.fillBlanks(d,a),d},a.prototype.findBestLocations=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(h=[],e=b.height,o=b.width,p=c.length,i=0,f=0,g=b.orientations.length;f<g;){for(l=b.orientations[f],d=this.checkOrientations[l],j=this.orientations[l],n=this.skipOrientations[l],q=0,r=0;r<e;)d(q,r,e,o,p)?(m=this.calcOverlap(c,a,q,r,j),(m>=i||!b.preferOverlap&&m>-1)&&(i=m,h.push({x:q,y:r,orientation:l,overlap:m})),q++,q>=o&&(q=0,r++)):(k=n(q,r,p),q=k.x,r=k.y);f++}return b.preferOverlap?this.pruneLocations(h,i):h},a.prototype.calcOverlap=function(a,b,c,d,e){var f,g,h,i,j;for(i=0,f=0,g=a.length;f<g;){if(h=e(c,d,f),j=b[h.y][h.x],j===a[f])i++;else if(""!==j)return-1;f++}return i},a.prototype.pruneLocations=function(a,b){var c,d,e;for(e=[],c=0,d=a.length;c<d;)a[c].overlap>=b&&e.push(a[c]),c++;return e},a.prototype.placeWord=function(a,b,c,d,e){var f,g,h;for(f=0,g=b.length;f<g;)h=e(c,d,f),a[h.y][h.x]=b[f],f++},a.prototype.fillBlanks=function(a){var b,c,d,e,f,g;for(c=0,b=a.length;c<b;){for(f=a[c],d=0,g=f.length;d<g;)a[c][d]||(e=Math.floor(Math.random()*this.letters.length),a[c][d]=this.letters[e]),d++;c++}},a.prototype.print=function(a){var b,c,d,e,f,g;for(e="",c=0,b=a.length;c<b;){for(f=a[c],d=0,g=f.length;d<g;)e+=(""===f[d]?" ":f[d])+" ",d++;e+="\n",c++}return console.log(e),e},a.prototype.checkWord=function(a){var b,c;return b=!1,c="",$.each($(a),function(a,b){return c+=$(b).text()}),$.each(this.wordList,function(a){return function(d,e){if(e===c||e===a.reverse(c))return b=a.wordList.splice(d,1),b=b[0]}}(this)),b},a.prototype.reverse=function(a){return a.split("").reverse().join("")},a}();